<body>
	instance 10
	<video width=100%></video>
</body>

<script>
	/*navigator.getUserMedia = ( navigator.getUserMedia ||
                         navigator.webkitGetUserMedia ||
                         navigator.mozGetUserMedia ||
                         navigator.msGetUserMedia);*/
    (async () => {
    	let media = null;
    	const videoElement = document.querySelector('video');

    	try {
    	    media = await navigator.mediaDevices.getUserMedia({audio: false, video: { facingMode: 'environment' } });
    	    console.log(media);
    	}
    	catch(e) {
    		document.querySelector('body').textContent = e
    	}

    	//console.log(window.URL.createObjectURL(media.getVideoTracks()[0]));
    	/*let string = '';
    	media.getVideoTracks().forEach(t => string += t.label + '\n');
    	document.body.textContent = string;*/
    	videoElement.srcObject = media;
    	videoElement.play();

    	const barcodeDetector = new BarcodeDetector({ formats: ['qr_code'] });

    	setTimeout(() => {
    		barcodeDetector.detect(videoElement).then(datas => document.querySelector('body').textContent = JSON.stringify(datas)).catch(e => document.querySelector('body').textContent = e);
    	}, 1000);
    })();
</script>

<style type="text/css">
	video {
		background-color: black;
		/*width: 100%    ;
  		height: 100%   !important;*/
	}
</style>